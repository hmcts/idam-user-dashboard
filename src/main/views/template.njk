{% extends "govuk/template.njk" %}
{% from "govuk/components/header/macro.njk" import govukHeader %}

{% block head %}
  {% include "webpack/css.njk" %}
{% endblock %}

{% block header %}
  {{ govukHeader({
    homepageUrl: "/",
    serviceName: "IDAM User Dashboard",
    serviceUrl: "/",
    navigation: [
      {
        href: "/logout",
        text: "Sign out",
        active: true
      }
    ]
  }) }}
{% endblock %}

{% block bodyEnd %}
  <script>
    function pushToDataLayer(selection, pageName) {
      const buttons = document.getElementsByName(selection);
      for (let i = 0; i < buttons.length; i++) {
        if (buttons[i].checked) {
          const val_id = buttons[i].id;
          const selector = 'label[for=' + val_id + ']';
          const label = document.querySelector(selector);
          const label_text = label.innerText;
          window.dataLayer.push({
            'event': 'Page selections',
            'Page': pageName ,
            'selection': label_text,
          });
        }
      }
    }
  </script>
  {# Run JavaScript at end of the <body>, to avoid blocking the initial render. #}
  {% include "webpack/js.njk" %}
{% endblock %}
